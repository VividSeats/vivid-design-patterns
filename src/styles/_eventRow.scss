@import 'tokens';
@import 'typography';
@import 'layout';
@import 'mixins/mixins';
@import 'mixins/prefixes';
@import '_badge.scss';

$column-date-width: 6rem;
$column-thumb-width: 4.25rem;
$column-thumb-margin: $sizing-md;

[class*='vdp-event-row']:not([class*='__']) {
    @include flex(0 1 auto);
    @include flex-wrap(wrap);
    @include transition(all $transition-1);
    border-radius: $border-radius-sm;
    cursor: pointer;
    margin-left: -$sizing-md;
    margin-right: -$sizing-md;
    padding: $sizing-md;

    &:hover {
        background-color: $color-neutral-100;
    }
    &[data-row='last'] {
        border-bottom: none;
        padding-bottom: $sizing-xs;
    }
}
[class*='vdp-event-row__col'] {
    @include flex(0 0 auto);
    @include flex-direction(column);
    box-sizing: border-box;
    max-width: 100%;

    &[class*='--button'] {
        display: none;

        @include size-min-tablet {
            display: inherit;
            text-align: right;

            button {
                margin: 0 0;
            }
            .price-length-3 {
                padding: 0 $sizing-lg;
            }
            .price-length-4 {
                padding: 0 $sizing-md;
            }
        }
    }

    &[class*='--checkbox'] {
        color: $text-color-muted;

        .vdp-icon-checkbox-on {
            color: $text-color-link;
        }

        + .vdp-event-row__col--date {
            padding-left: 0;
        }

        @include size-min-tablet {
            display: inherit;
            padding-left: $sizing-md;
        }
    }

    &[class*='--mobile-min-price'] {
        text-align: right;
        padding-right: $sizing-sm;

        .usd {
            margin: 0;
        }

        .lead-price {
            color: $color-brand-primary;
            font-weight: $font-weight-med;
        }

        @include size-min-tablet {
            display: none !important;
        }
    }

    &[class*='--date'] {
        width: $column-date-width;

        > *:not(:last-child) {
            margin-bottom: $sizing-2xs;
        }
        + .vdp-event-row__col--info {
            max-width: calc(100% - #{$column-date-width});
        }
    }
    &[class*='--info'] {
        @include flex-basis(0%);
        @include flex-grow(1);
        @include flex-shrink(1);
        padding: 0 $sizing-lg;

        > *:not(:last-child) {
            margin-bottom: $sizing-xs;
        }
    }
    &[class*='--range'] {
        padding: 0 $sizing-lg;

        + .vdp-event-row__col--button {
            width: auto;
        }
        + .vdp-event-row__col--checkbox {
            width: auto;
        }
        @include size-only-mobile {
            @include flex-basis(100%);
        }
    }
    &[class*='--thumb'] {
        border-radius: $border-radius-round;
        overflow: hidden;
        width: $sizing-4xl;
        height: $sizing-4xl;
        background-size: cover;
        background-position: center center;

        + .vdp-event-row__col--info {
            max-width: calc(100% - #{$column-thumb-width});
            padding-left: $sizing-md;
        }
    }
}

// Truncate Info Column
@include size-min-tablet {
    .vdp-event-row__col--info.truncate {
        overflow: hidden;

        > * {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        &:hover > * {
            overflow: visible;
            white-space: normal;
        }
    }
}

// Skeleton Loader
$animation-width: 752px;
$gradient-size: 200px;

.vdp-event-row--skeleton {
    max-height: 72px;

    &:hover {
        background-color: transparent !important;
        cursor: default;
    }
    > * {
        border-color: $color-neutral-200;
    }
    .skeleton__line {
        animation: loading 2s infinite ease-in-out;
        background-color: $color-neutral-200;
        background-image: linear-gradient(
            90deg,
            $color-neutral-200 0px,
            $color-neutral-300 #{$gradient-size / 2},
            $color-neutral-200 $gradient-size
        );
        background-repeat: no-repeat;
        background-size: $gradient-size;
        border-radius: $border-radius-sm;
        height: $sizing-md;
        width: 100%;

        &:nth-child(even) {
            width: 80%;
        }
        &:not(:last-child) {
            margin-bottom: $sizing-xs;
        }
    }
    .vdp-event-row__col--date .skeleton__line:nth-child(odd) {
        width: 64%;
    }
}
@keyframes loading {
    0% {
        background-position: -$gradient-size;
    }
    100% {
        background-position: calc(100% + #{$gradient-size});
    }
}

// EVENT ROWS THAT APPEAR WITHIN AN ANCHOR CARD
// • Reduced padding to mobile size
// • Background color doesn't change on hover
.vdp-event-row {
    .vdp-card--anchor & {
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding: $sizing-lg;

        &:hover {
            background: $color-white !important;
        }
    }
}
