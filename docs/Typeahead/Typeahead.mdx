import TypeAhead from '../../src/components/molecules/TypeAhead';
import TextField from '../../src/components/molecules/TextField';
import Button from '../../src/components/atoms/Button';
import StatefulComponent from '../StatefulComponent';
import EventRow from '../../src/components/molecules/EventRow';
import { PropsTable, Playground } from 'docz'
import { getTeamSuggestions, getHiearchalSuggestions, getCustomEventSuggestions, getCustomHiearchalSuggestions } from './getSuggestions';

---
    name: Type Ahead
---


## Installation


## Basic Usage
```
    The example below shows typeahead searching a database of football teams that include `'Wisconsin Badgers', 'Illinois Fighting Illini', 'Iowa Hawkeyes', "Notre Dame Fighting Irish", 'Northwestern Wildcats', 'Clemson Tigers'`.
```
<Playground>
    <StatefulComponent initialState={{suggestions: []}}>
    {
        ({state, setState}) => {
            const getSuggestion = (input) => {
                setState({
                     suggestions: getTeamSuggestions(input)
                 })
            }

            const onSelect = (selected) => alert(selected)

            return <TypeAhead placeholder="Search by team, artist, event or venue" onChange={e => getSuggestion(e)} onSelect={onSelect} suggestions={state.suggestions}/>
        }
    }
    </StatefulComponent>
</Playground>


## Hierarchal Data
<Playground>
    <StatefulComponent initialState={{suggestions: []}}>
    {
        ({state, setState}) => {
            const getSuggestion = (input) => {
                const { suggestedStadiums, suggestedEvents, suggestedTeams } = getHiearchalSuggestions(input)

                setState({
                    suggestions: [{title: 'Stadiums', items: suggestedStadiums}, {title: 'Events',items: suggestedEvents}, {title: 'Teams', items: suggestedTeams }]
                })

            };
            const onSelect = (selected) => alert(selected);
            return <TypeAhead showHierarchicalDropdown placeholder="Search by team, artist, event or venue" onChange={e => getSuggestion(e)} onSelect={onSelect} suggestions={state.suggestions}/>
        }
    }
    </StatefulComponent>
</Playground>


## Custom Suggestion Item
<Playground>
    <StatefulComponent initialState={{suggestions: []}}>
    {
        ({state, setState}) => {
            const getSuggestion = (input) => {
                setState({
                    suggestions: getCustomEventSuggestions(input)
                })

            };
            const onSelect = (selected) => alert(JSON.stringify(selected));
            const SuggestionItem = ({suggestion, isHighlighted, onClick}) => <EventRow onClick={onClick} title={suggestion.name} date={suggestion.date} style={{background: isHighlighted ? '#eee' : '#FFF'}}/>
            return <TypeAhead SuggestionItem={SuggestionItem} placeholder="Search by team, artist, event or venue" onChange={e => getSuggestion(e)} onSelect={onSelect} suggestions={state.suggestions}/>
        }
    }
    </StatefulComponent>
</Playground>

## Using Render Props
<Playground>
    <StatefulComponent initialState={{suggestions: []}}>
    {
        ({state, setState}) => {
            const getSuggestion = (input) => {
                const { suggestedEvents, suggestedTeams, suggestedStadiums } = getCustomHiearchalSuggestions(input);
                setState({
                    suggestions: [
                        {
                            title: 'Events',
                            items: suggestedEvents
                        },
                        {
                            title: 'Teams',
                            items: suggestedTeams
                        },
                        {
                            title: 'Stadiums',
                            items: suggestedStadiums
                        }
                    ]
                    })

            };
            const onSelect = (selected) => alert(JSON.stringify(selected));
            return (
                <TypeAhead suggestions={state.suggestions} onSelect={onSelect} onChange={getSuggestion}>
                    {
                        ({
                            highlightedIndex,
                            onKeyDown,
                            setHighlightedIndex,
                            onInputSubmit,
                            onChange
                        }) => (
                            <div className="type-ahead">
                                <TextField id="typeAhead" label="Search for a football team" onChange={onChange} onKeyDown={onKeyDown}/>
                                <Button importance="text">See All Results</Button>
                                <div>
                                </div>
                            </div>
                        )
                    }
                </TypeAhead>
            )
        }
    }
    </StatefulComponent>
</Playground>