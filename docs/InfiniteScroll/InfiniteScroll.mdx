import Button from '../../src/components/atoms/Button';

---
    name: Infinite Scroll
---

import { PropsTable, Playground } from 'docz'
import PseudoInfiniteScroll from '../../src/components/molecules/PseudoInfiniteScroll';
import InfiniteScroll from '../../src/components/molecules/InfiniteScroll';
import EventRow from '../../src/components/molecules/EventRow';
import StatefulComponent from '../StatefulComponent';
import generateEvents from './randomEventGenerator';

import "../../src/styles/_eventRow.scss";
import "../../src/styles/_infiniteScroll.scss";

# Infinite Scroll
## Installation
Using the react components:

    import InfiniteScroll from '@vividseats/vivid-design-patterns/dist/molecules/InfiniteScroll';

Adding the styles:

    import '@vividseats/vivid-design-patterns/src/styles/infiniteScroll.scss';

## Props
<PropsTable of={InfiniteScroll}/>

## Basic Usage

<Playground>
    <StatefulComponent initialState={{events: generateEvents(50), isLoading: false}}>
        {
            ({state, setState}) => {
                loadMore = () => {
                    if(state.events.length > 1000) {
                        return
                    }
                    setState({isLoading: true});
                    setTimeout(() => {
                        const events = [...state.events, ...generateEvents(50)];
                        setState({
                            events,
                            isLoading: false,
                        })
                    }, 1800)
                }

                return (
                    <InfiniteScroll onLoadMore={loadMore} isLoading={state.isLoading}>
                        {
                            state.events.map((event) => {
                                return <EventRow subtitle={event.eventLocation} href='!#' title={event.eventName} key={`${event.eventName}-${event.eventLocation}-${event.id}`}/>
                            })
                        }
                    </InfiniteScroll>
                )
            }
        }
    </StatefulComponent>
</Playground>


## Load More Button
Sometimes, you may not want a list to have infinite scroll by default, eg. if you have content below the list. The InfiniteScroll component has showLoadMoreButton prop that when set to true, will dispay a load more button. Infinite scroll is not initiated until the button is clicked.

<Playground>
    <StatefulComponent initialState={{events: generateEvents(50), isLoading: false}}>
        {
            ({state, setState}) => {
                loadMore = () => {
                    console.log("here");
                    if(state.events.length > 1000) {
                        return
                    }
                    setState({isLoading: true});
                    setTimeout(() => {
                        const events = [...state.events, ...generateEvents(50)];
                        setState({
                            events,
                            isLoading: false,
                        })
                    }, 1800)
                }

                return (
                    <InfiniteScroll onLoadMore={loadMore} isLoading={state.isLoading} showLoadMoreButton>
                        {
                            state.events.map((event) => {
                                return <EventRow subtitle={event.eventLocation} href='!#' title={event.eventName} key={`${event.eventName}-${event.eventLocation}-${event.id}`}/>
                            })
                        }
                    </InfiniteScroll>
                )
            }
        }
    </StatefulComponent>
</Playground>

## Pseudo Infinite Scroll
If you want to load all the data at once and only display a subset, and allow the user to show more as they load, simulating an Infinite Scroll experience, you can use the PseudoInfiniteScroll component

<PropsTable of={PseudoInfiniteScroll}/>

<Playground>
    {
        () => {
            const events = generateEvents(300); // Generate 300 random events
            return (
                <PseudoInfiniteScroll>
                    {
                        events.map((event) => {
                            return <EventRow subtitle={event.eventLocation} href='!#' title={event.eventName} key={`${event.eventName}-${event.eventLocation}-${event.id}`}/>
                        })
                    }
                </PseudoInfiniteScroll>
            )
        }
    }
</Playground>